---
import { Heading } from "@navikt/ds-react";
import AppSwitcherSkeleton from "src/components/skeleton/AppSwitcherSkeleton";
import AppSwitcher from "../components/appswitcher/AppSwitcher";
import GuidePanel from "../components/guidepanel/GuidePanel";
import Layout from "../layouts/Layout.astro";
import styles from "./_index.module.css";

const userInfo = Astro.locals.userInfo;

const currentHour = new Date().getHours();
const greeting =
  currentHour < 10
    ? "God morgen"
    : currentHour < 12
      ? "God formiddag"
      : currentHour < 18
        ? "God ettermiddag"
        : "God kveld";
---

<Layout title="Hjem">
  <div class={styles.home}>
    <div class={styles.homeContent}>
      <div class={styles.homeGuidepanel}>
        <div class={styles.homeHeading}>
          <Heading level="1" size="large" spacing>
            {greeting}, {userInfo.name}
          </Heading>
        </div>
        <GuidePanel />
      </div>
      <div>
        <AppSwitcher
          server:defer
          adGroups={userInfo.adGroups}
          client:only="react"
        >
          <AppSwitcherSkeleton slot="fallback" />
        </AppSwitcher>
      </div>
    </div>
  </div>
</Layout>
