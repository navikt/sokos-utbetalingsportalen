---
import { microfrontendConfigArray } from "src/microfrontend";
import MicrofrontendWrapper from "../components/microfrontend/MicrofrontendWrapper.astro";
import NotFound from "../pages/404.astro";

const currentPath = Astro.params.app ?? "";

const matchingApp = microfrontendConfigArray.find(
  app => app.route === `/${currentPath}`
);

if (!matchingApp) {
  Astro.response.status = 404;
}
---
{matchingApp ? (
  <MicrofrontendWrapper appName={matchingApp.app} />
) : (
  <NotFound />
)}
