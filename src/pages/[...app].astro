---
import { microfrontendConfigArray } from "src/microfrontend";
import MicrofrontendWrapper from "../components/microfrontend/MicrofrontendWrapper.astro";
import { normalizeRoute } from "src/utils/normalizeRoute";
import NotFound from "../pages/404.astro";

// er denne true blir html generert ved byggetid
export const prerender = false;

const currentPath = Astro.params.app ?? "";

const matchingApp = microfrontendConfigArray.find(
  app => app.route === normalizeRoute(currentPath)
);

if (!matchingApp) {
  Astro.response.status = 404;
}
---
{matchingApp ? (
  <MicrofrontendWrapper appName={matchingApp.app} />
) : (
  <NotFound />
)}
