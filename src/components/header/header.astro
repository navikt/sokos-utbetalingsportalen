---
import { InternalHeader, Spacer } from "@navikt/ds-react";
import { Image } from "astro:assets";
import navLogo from "../../assets/images/nav-icon-hvit.png";
import AppSwitcherHeaderSkeleton from "./AppSwitcherHeaderSkeleton";
import AppSwitcherHeader from "./AppSwitcherHeader";
import styles from "./header.module.css";

const userInfo = Astro.locals.userInfo;
---

<div class={styles["header"]}>
  <InternalHeader>
    <Image
      src={navLogo}
      alt="NAV logo"
      class={styles["header__navLogo"]}
      width={72}
      height={48}
      loading="eager"
      format="webp"
    />
    <InternalHeader.Title href="/">Utbetalingsportalen</InternalHeader.Title>
    <Spacer />
    <AppSwitcherHeader
      server:defer
      adGroups={userInfo.groups}
      client:only="react"
    >
      <AppSwitcherHeaderSkeleton slot="fallback" />
    </AppSwitcherHeader>
    <InternalHeader.User name={userInfo.name} description={userInfo.NAVident} />
  </InternalHeader>
</div>
